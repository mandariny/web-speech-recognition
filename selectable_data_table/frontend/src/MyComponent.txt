import React, { useState, ReactElement } from "react"
import { Streamlit, withStreamlitConnection, ComponentProps } from "streamlit-component-lib";
import SpeechRecognition, { useSpeechRecognition } from 'react-speech-recognition';

interface State {
  numClicks: number
  isFocused: boolean
  words: string
}

function MyComponent({args}: ComponentProps): ReactElement {
  const { transcript, listening } = useSpeechRecognition();

  const toggleListening = (): void => {
    if (listening) {
      SpeechRecognition.stopListening();
    } else {
      SpeechRecognition.startListening({ language: 'ko-KR', continuous: true });
    }
  }

  return (
    <span>
      <button>
        Click Me!
      </button>
      <textarea className="transcript" value={transcript} onChange={() => {}} />
      <button onClick={toggleListening}>
        {listening ? '음성인식 중지' : '음성인식 시작'}
      </button>
    </span>
  );
}

export default withStreamlitConnection(MyComponent);
